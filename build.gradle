apply plugin: 'java'

repositories {
    mavenCentral()
}

sourceSets {
    java7 {
        java.srcDir file('src/java7/java')
        resources.srcDir file('src/java7/resources')
        compileClasspath += main.output
    }
    release {
        java.srcDir file('src/release/java')
        resources.srcDir file('src/release/resources')
        compileClasspath += main.output
    }
}

task java7Jar(type: Jar) {
    from sourceSets.main.output
    from sourceSets.java7.output
}

task releaseJar(type: Jar) {
    from sourceSets.main.output
    from sourceSets.release.output
}

task java7Javadoc(type: Javadoc) {
    source sourceSets.java7.allJava
}

task releaseJavadoc(type: Javadoc) {
    source sourceSets.release.allJava
}

configurations {
    java7Compile {
        extendsFrom compile
    }
    releaseCompile {
        extendsFrom compile
    }
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
}